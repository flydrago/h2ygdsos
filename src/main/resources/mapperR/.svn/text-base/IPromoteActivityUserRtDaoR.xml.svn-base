<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.h2y.os.dao.read.IPromoteActivityUserRtDaoR">

	<resultMap type="com.h2y.os.entity.PromoteActivityUserRt" id="promoteactivityuserrtDaoMap">
		<result property="id" column="id" javaType="long" jdbcType="BIGINT" />
		<result property="promoteId" column="promote_id" javaType="long" jdbcType="BIGINT" />
		<result property="shareAccount" column="share_account" javaType="string" jdbcType="VARCHAR" />
		<result property="claimAccount" column="claim_account" javaType="string" jdbcType="VARCHAR" />
		<result property="createDate" column="create_date" javaType="date" jdbcType="TIMESTAMP" />
		<result property="str1" column="str_1" javaType="string" jdbcType="VARCHAR" />
		<result property="str2" column="str_2" javaType="string" jdbcType="VARCHAR" />
		<result property="str3" column="str_3" javaType="string" jdbcType="VARCHAR" />
		<result property="str4" column="str_4" javaType="string" jdbcType="VARCHAR" />
	</resultMap>
	
	<resultMap type="java.util.Map" id="promoteactivityuserrtDaoListMap">
		<result property="id" column="id" javaType="long" jdbcType="BIGINT" />
		<result property="promoteId" column="promote_id" javaType="long" jdbcType="BIGINT" />
		<result property="shareAccount" column="share_account" javaType="string" jdbcType="VARCHAR" />
		<result property="claimAccount" column="claim_account" javaType="string" jdbcType="VARCHAR" />
		<result property="createDate" column="create_date" javaType="date" jdbcType="TIMESTAMP" />
		<result property="str1" column="str_1" javaType="string" jdbcType="VARCHAR" />
		<result property="str2" column="str_2" javaType="string" jdbcType="VARCHAR" />
		<result property="str3" column="str_3" javaType="string" jdbcType="VARCHAR" />
		<result property="str4" column="str_4" javaType="string" jdbcType="VARCHAR" />
		<result property="headPath" column="head_path" javaType="string" jdbcType="VARCHAR" />
	</resultMap>
	
	

	<select id="get" parameterType="long"
		resultMap="promoteactivityuserrtDaoMap">
		select * from tb_promote_activity_user_rt where id = #{id}
	</select>

	
	<select id="getRowsByPromoteIdAndClaimAccount" parameterType="hashmap"
		resultType="long">
		select count(id) from tb_promote_activity_user_rt 
		where claim_account = #{claimAccount} and promote_id = #{promoteId}
	</select>
	
	<select id="getListMap" parameterType="hashmap"
		resultMap="promoteactivityuserrtDaoListMap">
		SELECT
			urt.claim_account,
			urt.create_date,
			mu.head_path,
			urt.str_1
		FROM
			tb_promote_activity_user_rt urt
		JOIN tb_member_user mu ON urt.claim_account = mu.account
		WHERE
			urt.promote_id = #{promoteId}
		ORDER BY
			urt.create_date DESC
		limit ${(page-1)*pagesize},${pagesize}
	</select>
	
	<select id="getListRows" parameterType="hashmap"
		resultType="long">
		select count(id) from tb_promote_activity_user_rt
		where promote_id = #{promoteId}
	</select>
	
</mapper>